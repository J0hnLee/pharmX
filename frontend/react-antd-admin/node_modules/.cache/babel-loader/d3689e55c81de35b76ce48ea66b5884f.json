{"ast":null,"code":"import \"antd/lib/icon/style/css\";\nimport _Icon from \"antd/lib/icon\";\nimport \"antd/lib/menu/style/css\";\nimport _Menu from \"antd/lib/menu\";\nimport \"antd/lib/layout/style/css\";\nimport _Layout from \"antd/lib/layout\";\nvar _jsxFileName = \"/Users/johnlee/Desktop/pharmPOS/react-antd-admin/src/views/layout/SideMenu.js\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter, Link } from 'react-router-dom';\nimport { setUserInfo } from '@/redux/actions/userInfo';\nimport { addTag } from '@/redux/actions/tagList';\nimport { menus } from '@/router/menus';\nimport { routes } from '@/router/routes';\nconst {\n  Sider\n} = _Layout;\nconst {\n  SubMenu\n} = _Menu;\n\nclass SideNenu extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      menuSelected: this.props.history.location.pathname\n    };\n\n    this.handleFilter = permission => {\n      const roleType = localStorage.getItem('userInfo') && JSON.parse(localStorage.getItem('userInfo')).role.type; // 过滤没有权限的页面\n\n      if (!permission || permission === roleType) {\n        return true;\n      }\n\n      return false;\n    };\n\n    this.renderMenu = data => {\n      return data.map(item => {\n        if (item.children) {\n          return this.handleFilter(item.permission) && /*#__PURE__*/React.createElement(SubMenu, {\n            key: item.path,\n            title: /*#__PURE__*/React.createElement(\"span\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 43,\n                columnNumber: 9\n              }\n            }, item.icon ? /*#__PURE__*/React.createElement(_Icon, {\n              type: item.icon,\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 44,\n                columnNumber: 23\n              }\n            }) : '', /*#__PURE__*/React.createElement(\"span\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 45,\n                columnNumber: 10\n              }\n            }, item.title)),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 40,\n              columnNumber: 7\n            }\n          }, this.renderMenu(item.children));\n        }\n\n        return this.handleFilter(item.permission) && /*#__PURE__*/React.createElement(_Menu.Item, {\n          key: item.path,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 6\n          }\n        }, /*#__PURE__*/React.createElement(Link, {\n          to: item.path,\n          onClick: () => this.handClickTag(item),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 7\n          }\n        }, item.icon ? /*#__PURE__*/React.createElement(_Icon, {\n          type: item.icon,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 21\n          }\n        }) : '', /*#__PURE__*/React.createElement(\"span\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 8\n          }\n        }, item.title)));\n      });\n    };\n  }\n\n  // 点击之后加入页签\n  handClickTag(currentLink, parent) {\n    const {\n      path,\n      title\n    } = currentLink;\n\n    for (let i = 0; i < routes.length; i++) {\n      if (path === routes[i].path) {\n        let obj = {\n          path,\n          title,\n          component: routes[i].component\n        };\n        this.props.addTag(parent ? Object.assign({}, obj, {\n          parent: parent.title\n        }) : obj);\n      }\n    }\n  } // 递归渲染菜单\n\n\n  render() {\n    // console.log(this.props);\n    const menuSelected = this.props.history.location.pathname;\n    const menuOpened = `/${menuSelected.split('/')[1]}`;\n    const type = this.props.theme.type;\n    const {\n      collapse\n    } = this.props;\n    return /*#__PURE__*/React.createElement(Sider, {\n      trigger: null,\n      collapsible: true,\n      collapsed: collapse.isCollapsed,\n      theme: type,\n      className: \"app-sider\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"logo\",\n      style: {\n        color: type === 'dark' ? '#ffffffa6' : ''\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 5\n      }\n    }, \"Logo\"), /*#__PURE__*/React.createElement(_Menu, {\n      style: {\n        height: '50px'\n      },\n      theme: type,\n      defaultOpenKeys: [menuOpened],\n      defaultSelectedKeys: [menuSelected],\n      selectedKeys: [menuSelected],\n      mode: \"inline\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 5\n      }\n    }, this.renderMenu(menus)));\n  }\n\n  // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {\n    // @ts-ignore\n    this[key] = eval(code);\n  }\n\n}\n\nconst mapStateToProps = state => state;\n\nconst mapDispatchToProps = dispatch => ({\n  setUserInfo: data => {\n    dispatch(setUserInfo(data));\n  },\n  addTag: data => {\n    dispatch(addTag(data));\n  }\n});\n\nconst _default = connect(mapStateToProps, mapDispatchToProps)(withRouter(SideNenu));\n\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(Sider, \"Sider\", \"/Users/johnlee/Desktop/pharmPOS/react-antd-admin/src/views/layout/SideMenu.js\");\n  reactHotLoader.register(SubMenu, \"SubMenu\", \"/Users/johnlee/Desktop/pharmPOS/react-antd-admin/src/views/layout/SideMenu.js\");\n  reactHotLoader.register(SideNenu, \"SideNenu\", \"/Users/johnlee/Desktop/pharmPOS/react-antd-admin/src/views/layout/SideMenu.js\");\n  reactHotLoader.register(mapStateToProps, \"mapStateToProps\", \"/Users/johnlee/Desktop/pharmPOS/react-antd-admin/src/views/layout/SideMenu.js\");\n  reactHotLoader.register(mapDispatchToProps, \"mapDispatchToProps\", \"/Users/johnlee/Desktop/pharmPOS/react-antd-admin/src/views/layout/SideMenu.js\");\n  reactHotLoader.register(_default, \"default\", \"/Users/johnlee/Desktop/pharmPOS/react-antd-admin/src/views/layout/SideMenu.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/Users/johnlee/Desktop/pharmPOS/react-antd-admin/src/views/layout/SideMenu.js"],"names":["React","Component","connect","withRouter","Link","setUserInfo","addTag","menus","routes","Sider","SubMenu","SideNenu","state","menuSelected","props","history","location","pathname","handleFilter","permission","roleType","localStorage","getItem","JSON","parse","role","type","renderMenu","data","map","item","children","path","icon","title","handClickTag","currentLink","parent","i","length","obj","component","Object","assign","render","menuOpened","split","theme","collapse","isCollapsed","color","height","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter, Link } from 'react-router-dom';\nimport { Layout, Menu, Icon } from 'antd';\nimport { setUserInfo } from '@/redux/actions/userInfo';\nimport { addTag } from '@/redux/actions/tagList';\nimport { menus } from '@/router/menus';\nimport { routes } from '@/router/routes';\nconst { Sider } = Layout;\nconst { SubMenu } = Menu;\n\nclass SideNenu extends Component {\n\tstate = { menuSelected: this.props.history.location.pathname };\n\n\thandleFilter = permission => {\n\t\tconst roleType = localStorage.getItem('userInfo') && JSON.parse(localStorage.getItem('userInfo')).role.type;\n\t\t// 过滤没有权限的页面\n\t\tif (!permission || permission === roleType) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t};\n\n\t// 点击之后加入页签\n\thandClickTag(currentLink, parent) {\n\t\tconst { path, title } = currentLink;\n\t\tfor (let i = 0; i < routes.length; i++) {\n\t\t\tif (path === routes[i].path) {\n\t\t\t\tlet obj = { path, title, component: routes[i].component };\n\t\t\t\tthis.props.addTag(parent ? Object.assign({}, obj, { parent: parent.title }) : obj);\n\t\t\t}\n\t\t}\n\t}\n\t// 递归渲染菜单\n\trenderMenu = data => {\n\t\treturn data.map(item => {\n\t\t\tif (item.children) {\n\t\t\t\treturn (\n\t\t\t\t\tthis.handleFilter(item.permission) && (\n\t\t\t\t\t\t<SubMenu\n\t\t\t\t\t\t\tkey={item.path}\n\t\t\t\t\t\t\ttitle={\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t{item.icon ? <Icon type={item.icon} /> : ''}\n\t\t\t\t\t\t\t\t\t<span>{item.title}</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{this.renderMenu(item.children)}\n\t\t\t\t\t\t</SubMenu>\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn (\n\t\t\t\tthis.handleFilter(item.permission) && (\n\t\t\t\t\t<Menu.Item key={item.path}>\n\t\t\t\t\t\t<Link to={item.path} onClick={() => this.handClickTag(item)}>\n\t\t\t\t\t\t\t{item.icon ? <Icon type={item.icon} /> : ''}\n\t\t\t\t\t\t\t<span>{item.title}</span>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</Menu.Item>\n\t\t\t\t)\n\t\t\t);\n\t\t});\n\t};\n\trender() {\n\t\t// console.log(this.props);\n\t\tconst menuSelected = this.props.history.location.pathname;\n\t\tconst menuOpened = `/${menuSelected.split('/')[1]}`;\n\t\tconst type = this.props.theme.type;\n\t\tconst { collapse } = this.props;\n\t\treturn (\n\t\t\t<Sider trigger={null} collapsible collapsed={collapse.isCollapsed} theme={type} className=\"app-sider\">\n\t\t\t\t<div className=\"logo\" style={{ color: type === 'dark' ? '#ffffffa6' : '' }}>\n\t\t\t\t\tLogo\n\t\t\t\t</div>\n\t\t\t\t<Menu style={{ height: '50px' }} theme={type} defaultOpenKeys={[menuOpened]} defaultSelectedKeys={[menuSelected]} selectedKeys={[menuSelected]} mode=\"inline\">\n\t\t\t\t\t{this.renderMenu(menus)}\n\t\t\t\t</Menu>\n\t\t\t</Sider>\n\t\t);\n\t}\n}\n\nconst mapStateToProps = state => state;\nconst mapDispatchToProps = dispatch => ({\n\tsetUserInfo: data => {\n\t\tdispatch(setUserInfo(data));\n\t},\n\taddTag: data => {\n\t\tdispatch(addTag(data));\n\t}\n});\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(withRouter(SideNenu));\n"]},"metadata":{},"sourceType":"module"}