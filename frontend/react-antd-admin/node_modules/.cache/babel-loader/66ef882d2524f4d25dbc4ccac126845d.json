{"ast":null,"code":"var _jsxFileName = \"/Users/johnlee/Desktop/react-antd-admin/src/views/layout/Tags.js\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { addTag, removeTag, emptyTag } from '@/redux/actions/tagList';\nimport { menus } from '../../router/menus';\nimport { Scrollbars } from 'react-custom-scrollbars';\n\nclass Tags extends Component {\n  handChangeTag(activeKey) {\n    if (this.props.location.pathname === activeKey) return;\n    this.props.history.push(activeKey);\n  }\n\n  handRemoveTag(e, targetKey) {\n    e.stopPropagation(); // 删除页签\n\n    const {\n      tagList\n    } = this.props;\n    const {\n      location\n    } = this.props;\n\n    if (location.pathname === targetKey) {\n      tagList.forEach(() => {\n        this.props.removeTag(targetKey);\n\n        if (targetKey === tagList[tagList.length - 1].path) {\n          // 当前页签在最后,删除之后则路由跳转到前一个页签\n          this.props.history.replace(tagList[tagList.length - 2].path);\n        } else {\n          // 当页页签不是在最后,删除之后则跳转到最后去\n          this.props.history.replace(tagList[tagList.length - 1].path);\n        }\n      });\n    } else {\n      this.props.removeTag(targetKey);\n    }\n  }\n\n  componentDidMount() {\n    // 默认加入首页\n    this.props.addTag({\n      title: '首页',\n      path: '/dashboard'\n    });\n    const {\n      location\n    } = this.props;\n\n    for (let i = 0; i < menus.length; i++) {\n      if (menus[i].children) {\n        for (let j = 0; j < menus[i].children.length; j++) {\n          if (location.pathname === menus[i].children[j].path) {\n            this.props.addTag({\n              title: menus[i].children[j].title,\n              path: menus[i].children[j].path\n            });\n          } else {\n            if (menus[i].children[j].children) {\n              for (let k = 0; k < menus[i].children[j].children.length; k++) {\n                if (location.pathname === menus[i].children[j].children[k].path) {\n                  this.props.addTag({\n                    title: menus[i].children[j].children[k].title,\n                    path: menus[i].children[j].children[k].path\n                  });\n                }\n              }\n            }\n          }\n        }\n      } else {\n        if (location.pathname === menus[i].path) {\n          this.props.addTag({\n            title: menus[i].title,\n            path: menus[i].path\n          });\n        }\n      }\n    }\n  }\n\n  componentDidUpdate(newProps) {\n    let tagList = document.querySelector('.tags-list');\n    let arrLi = tagList.querySelectorAll('li');\n    let w = 0; // 根据tags计算宽度\n\n    for (var i = 0; i < arrLi.length; i++) {\n      w += arrLi[i].offsetWidth + 4;\n    }\n\n    tagList.style.width = w + 'px';\n  }\n\n  render() {\n    const {\n      tagList,\n      location\n    } = this.props;\n    if (tagList.length === 0) return null;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tags\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tags-scroll\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Scrollbars, {\n      style: {\n        width: '100%',\n        height: 45\n      },\n      autoHide: true,\n      universal: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"tags-list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 7\n      }\n    }, tagList.map((item, index) => /*#__PURE__*/React.createElement(\"li\", {\n      key: item.path,\n      className: location.pathname === item.path ? 'isActive' : '',\n      onClick: () => this.handChangeTag(item.path),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 10\n      }\n    }, item.title), /*#__PURE__*/React.createElement(\"em\", {\n      onClick: e => this.handRemoveTag(e, item.path),\n      className: index === 0 ? 'hide' : '',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 10\n      }\n    }, \"\\xD7\")))))));\n  }\n\n  // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {\n    // @ts-ignore\n    this[key] = eval(code);\n  }\n\n}\n\nconst mapStateToProps = state => state;\n\nconst mapDispatchToProps = dispatch => ({\n  addTag: data => {\n    dispatch(addTag(data));\n  },\n  removeTag: data => {\n    dispatch(removeTag(data));\n  },\n  emptyTag: () => {\n    dispatch(emptyTag());\n  }\n});\n\nconst _default = connect(mapStateToProps, mapDispatchToProps)(withRouter(Tags));\n\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(Tags, \"Tags\", \"/Users/johnlee/Desktop/react-antd-admin/src/views/layout/Tags.js\");\n  reactHotLoader.register(mapStateToProps, \"mapStateToProps\", \"/Users/johnlee/Desktop/react-antd-admin/src/views/layout/Tags.js\");\n  reactHotLoader.register(mapDispatchToProps, \"mapDispatchToProps\", \"/Users/johnlee/Desktop/react-antd-admin/src/views/layout/Tags.js\");\n  reactHotLoader.register(_default, \"default\", \"/Users/johnlee/Desktop/react-antd-admin/src/views/layout/Tags.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/Users/johnlee/Desktop/react-antd-admin/src/views/layout/Tags.js"],"names":["React","Component","withRouter","connect","addTag","removeTag","emptyTag","menus","Scrollbars","Tags","handChangeTag","activeKey","props","location","pathname","history","push","handRemoveTag","e","targetKey","stopPropagation","tagList","forEach","length","path","replace","componentDidMount","title","i","children","j","k","componentDidUpdate","newProps","document","querySelector","arrLi","querySelectorAll","w","offsetWidth","style","width","render","height","map","item","index","mapStateToProps","state","mapDispatchToProps","dispatch","data"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { addTag, removeTag, emptyTag } from '@/redux/actions/tagList';\nimport { menus } from '../../router/menus';\nimport { Scrollbars } from 'react-custom-scrollbars';\n\nclass Tags extends Component {\n\thandChangeTag(activeKey) {\n\t\tif (this.props.location.pathname === activeKey) return;\n\t\tthis.props.history.push(activeKey);\n\t}\n\thandRemoveTag(e, targetKey) {\n\t\te.stopPropagation();\n\t\t// 删除页签\n\t\tconst { tagList } = this.props;\n\t\tconst { location } = this.props;\n\t\tif (location.pathname === targetKey) {\n\t\t\ttagList.forEach(() => {\n\t\t\t\tthis.props.removeTag(targetKey);\n\t\t\t\tif (targetKey === tagList[tagList.length - 1].path) {\n\t\t\t\t\t// 当前页签在最后,删除之后则路由跳转到前一个页签\n\t\t\t\t\tthis.props.history.replace(tagList[tagList.length - 2].path);\n\t\t\t\t} else {\n\t\t\t\t\t// 当页页签不是在最后,删除之后则跳转到最后去\n\t\t\t\t\tthis.props.history.replace(tagList[tagList.length - 1].path);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tthis.props.removeTag(targetKey);\n\t\t}\n\t}\n\tcomponentDidMount() {\n\t\t// 默认加入首页\n\t\tthis.props.addTag({\n\t\t\ttitle: '首页',\n\t\t\tpath: '/dashboard'\n\t\t});\n\t\tconst { location } = this.props;\n\t\tfor (let i = 0; i < menus.length; i++) {\n\t\t\tif (menus[i].children) {\n\t\t\t\tfor (let j = 0; j < menus[i].children.length; j++) {\n\t\t\t\t\tif (location.pathname === menus[i].children[j].path) {\n\t\t\t\t\t\tthis.props.addTag({\n\t\t\t\t\t\t\ttitle: menus[i].children[j].title,\n\t\t\t\t\t\t\tpath: menus[i].children[j].path\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (menus[i].children[j].children) {\n\t\t\t\t\t\t\tfor (let k = 0; k < menus[i].children[j].children.length; k++) {\n\t\t\t\t\t\t\t\tif (location.pathname === menus[i].children[j].children[k].path) {\n\t\t\t\t\t\t\t\t\tthis.props.addTag({\n\t\t\t\t\t\t\t\t\t\ttitle: menus[i].children[j].children[k].title,\n\t\t\t\t\t\t\t\t\t\tpath: menus[i].children[j].children[k].path\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (location.pathname === menus[i].path) {\n\t\t\t\t\tthis.props.addTag({\n\t\t\t\t\t\ttitle: menus[i].title,\n\t\t\t\t\t\tpath: menus[i].path\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tcomponentDidUpdate(newProps) {\n\t\tlet tagList = document.querySelector('.tags-list');\n\t\tlet arrLi = tagList.querySelectorAll('li');\n\t\tlet w = 0; // 根据tags计算宽度\n\t\tfor (var i = 0; i < arrLi.length; i++) {\n\t\t\tw += arrLi[i].offsetWidth + 4;\n\t\t}\n\t\ttagList.style.width = w + 'px';\n\t}\n\n\trender() {\n\t\tconst { tagList, location } = this.props;\n\t\tif (tagList.length === 0) return null;\n\t\treturn (\n\t\t\t<div className=\"tags\">\n\t\t\t\t<div className=\"tags-scroll\">\n\t\t\t\t\t<Scrollbars style={{ width: '100%', height: 45 }} autoHide universal={true}>\n\t\t\t\t\t\t<ul className=\"tags-list\">\n\t\t\t\t\t\t\t{tagList.map((item, index) => (\n\t\t\t\t\t\t\t\t<li key={item.path} className={location.pathname === item.path ? 'isActive' : ''} onClick={() => this.handChangeTag(item.path)}>\n\t\t\t\t\t\t\t\t\t<span>{item.title}</span>\n\t\t\t\t\t\t\t\t\t<em onClick={e => this.handRemoveTag(e, item.path)} className={index === 0 ? 'hide' : ''}>\n\t\t\t\t\t\t\t\t\t\t&times;\n\t\t\t\t\t\t\t\t\t</em>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</Scrollbars>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nconst mapStateToProps = state => state;\nconst mapDispatchToProps = dispatch => ({\n\taddTag: data => {\n\t\tdispatch(addTag(data));\n\t},\n\tremoveTag: data => {\n\t\tdispatch(removeTag(data));\n\t},\n\temptyTag: () => {\n\t\tdispatch(emptyTag());\n\t}\n});\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(withRouter(Tags));\n"]},"metadata":{},"sourceType":"module"}