{"ast":null,"code":"var _jsxFileName = \"/Users/johnlee/Desktop/pharmPOS/frontend/react-antd-admin/src/components/chart/Chart.js\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport React, { Component } from 'react';\nimport { PropTypes } from 'prop-types';\nimport echarts from 'echarts';\nimport { debounce } from '@/utils';\n\nclass Chart extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      chart: null\n    };\n  }\n\n  componentDidMount() {\n    debounce(this.initChart.bind(this), 500)(); //初始化图表\n\n    window.addEventListener('resize', () => this.resize()); // 监听窗口，变化时重置图表\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.collapse.isCollapsed !== this.props.collapse.isCollapsed) {\n      this.resize();\n    }\n  }\n\n  componentWillUnmount() {\n    this.dispose();\n  } // 重置图表\n\n\n  resize() {\n    const chart = this.state.chart;\n\n    if (chart) {\n      debounce(chart.resize.bind(this), 300)();\n    }\n  }\n\n  initChart() {\n    if (!this.el) return;\n    this.setState({\n      chart: echarts.init(this.el, 'macarons')\n    }, () => {\n      this.state.chart.setOption(this.props.chartData, true);\n    });\n  }\n\n  dispose() {\n    if (!this.state.chart) return;\n    window.removeEventListener('resize', () => this.resize()); // 移除窗口，变化时重置图表\n\n    this.setState({\n      chart: null\n    });\n  }\n\n  render() {\n    const {\n      className,\n      height,\n      width,\n      style\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: className,\n      ref: el => this.el = el,\n      style: { ...style,\n        height,\n        width\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 10\n      }\n    });\n  }\n\n  // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {\n    // @ts-ignore\n    this[key] = eval(code);\n  }\n\n}\n\nChart.propTypes = {\n  width: PropTypes.string.isRequired,\n  height: PropTypes.string.isRequired,\n  className: PropTypes.string.isRequired,\n  style: PropTypes.object.isRequired,\n  chartData: PropTypes.object.isRequired\n};\nChart.defaultProps = {\n  width: '100%',\n  height: '340px',\n  className: 'shadow-radius',\n  style: {},\n  chartData: {}\n};\nconst _default = Chart;\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(Chart, \"Chart\", \"/Users/johnlee/Desktop/pharmPOS/frontend/react-antd-admin/src/components/chart/Chart.js\");\n  reactHotLoader.register(_default, \"default\", \"/Users/johnlee/Desktop/pharmPOS/frontend/react-antd-admin/src/components/chart/Chart.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/Users/johnlee/Desktop/pharmPOS/frontend/react-antd-admin/src/components/chart/Chart.js"],"names":["React","Component","PropTypes","echarts","debounce","Chart","state","chart","componentDidMount","initChart","bind","window","addEventListener","resize","componentWillReceiveProps","nextProps","collapse","isCollapsed","props","componentWillUnmount","dispose","el","setState","init","setOption","chartData","removeEventListener","render","className","height","width","style","propTypes","string","isRequired","object","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { PropTypes } from 'prop-types';\nimport echarts from 'echarts';\nimport { debounce } from '@/utils';\n\nclass Chart extends Component {\n\tstatic propTypes = {\n\t\twidth: PropTypes.string.isRequired,\n\t\theight: PropTypes.string.isRequired,\n\t\tclassName: PropTypes.string.isRequired,\n\t\tstyle: PropTypes.object.isRequired,\n\t\tchartData: PropTypes.object.isRequired\n\t};\n\tstatic defaultProps = {\n\t\twidth: '100%',\n\t\theight: '340px',\n\t\tclassName: 'shadow-radius',\n\t\tstyle: {},\n\t\tchartData: {}\n\t};\n\n\tstate = { chart: null };\n\n\tcomponentDidMount() {\n\t\tdebounce(this.initChart.bind(this), 500)(); //初始化图表\n\t\twindow.addEventListener('resize', () => this.resize()); // 监听窗口，变化时重置图表\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\t\tif (nextProps.collapse.isCollapsed !== this.props.collapse.isCollapsed) {\n\t\t\tthis.resize();\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.dispose();\n\t}\n\n\t// 重置图表\n\tresize() {\n\t\tconst chart = this.state.chart;\n\t\tif (chart) {\n\t\t\tdebounce(chart.resize.bind(this), 300)();\n\t\t}\n\t}\n\n\tinitChart() {\n\t\tif (!this.el) return;\n\t\tthis.setState(\n\t\t\t{\n\t\t\t\tchart: echarts.init(this.el, 'macarons')\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tthis.state.chart.setOption(this.props.chartData, true);\n\t\t\t}\n\t\t);\n\t}\n\n\tdispose() {\n\t\tif (!this.state.chart) return;\n\t\twindow.removeEventListener('resize', () => this.resize()); // 移除窗口，变化时重置图表\n\t\tthis.setState({ chart: null });\n\t}\n\trender() {\n\t\tconst { className, height, width, style } = this.props;\n\t\treturn <div className={className} ref={el => (this.el = el)} style={{ ...style, height, width }} />;\n\t}\n}\n\nexport default Chart;\n"]},"metadata":{},"sourceType":"module"}