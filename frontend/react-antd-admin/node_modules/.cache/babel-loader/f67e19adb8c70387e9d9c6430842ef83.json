{"ast":null,"code":"import \"antd/lib/dropdown/style/css\";\nimport _Dropdown from \"antd/lib/dropdown\";\nimport \"antd/lib/avatar/style/css\";\nimport _Avatar from \"antd/lib/avatar\";\nimport \"antd/lib/badge/style/css\";\nimport _Badge from \"antd/lib/badge\";\nimport \"antd/lib/menu/style/css\";\nimport _Menu from \"antd/lib/menu\";\nimport \"antd/lib/icon/style/css\";\nimport _Icon from \"antd/lib/icon\";\nvar _jsxFileName = \"/Users/johnlee/Desktop/react-antd-admin/src/views/layout/TopHeader.js\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport { setUserInfo } from '@/redux/actions/userInfo';\nimport { emptyTag, addTag } from '@/redux/actions/tagList';\nimport { setCollapse, setBreadCrumb, setTags, setTheme } from '@/redux/actions/setting';\nimport { routes } from '@/router/routes';\nimport FullScreen from '@/components/FullScreen';\nimport Tags from './Tags';\nimport BasicDrawer from '@/components/BasicDrawer';\n\nclass TopHeader extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      visible: false\n    };\n\n    this.handleLogout = () => {\n      this.props.setUserInfo({});\n      this.props.emptyTag();\n      localStorage.removeItem('isLogin');\n      localStorage.removeItem('userInfo');\n      this.props.history.push('/');\n    };\n\n    this.toNews = () => {\n      this.handClickTag('/news');\n      this.props.history.push('/news');\n    };\n\n    this.toggle = () => {\n      this.props.setCollapse({\n        isCollapsed: !this.props.collapse.isCollapsed\n      });\n    };\n\n    this.setting = () => {\n      this.setState({\n        visible: true\n      });\n    };\n\n    this.onClose = () => {\n      this.setState({\n        visible: false\n      });\n    };\n\n    this.onChangeTags = checked => {\n      this.props.setTags({\n        show: checked\n      });\n      localStorage.setItem('tags', JSON.stringify({\n        show: checked\n      }));\n      this.onClose();\n    };\n\n    this.onChangeBreadCrumb = checked => {\n      this.props.setBreadCrumb({\n        show: checked\n      });\n      localStorage.setItem('breadCrumb', JSON.stringify({\n        show: checked\n      }));\n      this.onClose();\n    };\n\n    this.onChangeTheme = checked => {\n      this.props.setTheme({\n        type: checked ? 'dark' : 'light'\n      });\n      localStorage.setItem('theme', JSON.stringify({\n        type: checked ? 'dark' : 'light'\n      }));\n      this.onClose();\n    };\n  }\n\n  componentDidMount() {\n    let userInfo = localStorage.getItem('userInfo') && JSON.parse(localStorage.getItem('userInfo'));\n\n    if (userInfo) {\n      this.props.setUserInfo(userInfo);\n    } else {\n      this.props.setUserInfo({});\n      this.props.history.push('/login');\n    }\n  }\n\n  handClickTag(path, parent) {\n    for (let i = 0; i < routes.length; i++) {\n      if (path === routes[i].path) {\n        let obj = {\n          path,\n          title: '消息',\n          component: routes[i].component\n        };\n        this.props.addTag(parent ? Object.assign({}, obj, {\n          parent: parent.title\n        }) : obj);\n      }\n    }\n  }\n\n  render() {\n    const DropdownList = /*#__PURE__*/React.createElement(_Menu, {\n      className: \"drop-list\"\n    }, /*#__PURE__*/React.createElement(_Menu.Item, {\n      key: \"user\"\n    }, /*#__PURE__*/React.createElement(_Icon, {\n      type: \"user\"\n    }), Object.keys(this.props.userInfo).length > 0 && this.props.userInfo.role.name), /*#__PURE__*/React.createElement(_Menu.Item, {\n      key: \"logout\",\n      onClick: this.handleLogout\n    }, /*#__PURE__*/React.createElement(_Icon, {\n      type: \"logout\"\n    }), \"\\u9000\\u51FA\\u767B\\u5F55\"));\n    const {\n      tags\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"top-header\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"top-header-inner\"\n    }, /*#__PURE__*/React.createElement(_Icon, {\n      className: \"trigger\",\n      type: true ? 'menu-unfold' : 'menu-fold',\n      onClick: this.toggle\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"header-title\"\n    }, \"React-antd-admin \\u901A\\u7528\\u540E\\u53F0\\u7BA1\\u7406\\u7CFB\\u7EDF\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"header-right\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"full-screen\"\n    }, /*#__PURE__*/React.createElement(FullScreen, null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"setting\"\n    }, /*#__PURE__*/React.createElement(_Icon, {\n      style: {\n        fontSize: '21px',\n        cursor: 'pointer'\n      },\n      type: \"setting\",\n      onClick: this.setting\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"news-wrap\"\n    }, /*#__PURE__*/React.createElement(_Badge, {\n      count: 3\n    }, /*#__PURE__*/React.createElement(_Icon, {\n      style: {\n        fontSize: '21px',\n        cursor: 'pointer'\n      },\n      type: \"bell\",\n      onClick: this.toNews\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dropdown-wrap\",\n      id: \"dropdown-wrap\",\n      style: {\n        cursor: 'pointer'\n      }\n    }, /*#__PURE__*/React.createElement(_Dropdown, {\n      getPopupContainer: () => document.getElementById('dropdown-wrap'),\n      overlay: DropdownList\n    }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(_Avatar, {\n      size: \"large\",\n      src: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAiCAYAAAA6RwvCAAADwElEQVRYR7WXTWwTVxDH/7Pe9Qf+ahyaOAmBUKeBAyqXSlUrUM/0A6lHxAWE1PbSG+IIoceKG5e2EqKXimMlWtpzRdWqgkurHiDEJTgkcQJx8Bf+2I9Bb8kG2/H6PRL7XfbwZub9dmbezDzCa6z5fH7EqTQ/AuFDZhwBMAUgvmmiDGCBCP+B8bsWC/46nU6vqZonFcFsdvmYCesCHJwggq6iwwwLGn4zoH+TyYz/IdPpCXJvIX9Qs82rzPyxzFCvfSK65QSMrw5PpR/6yfmCzGWXTjFb3wHkuX43LAC4TKR/MZOZuNHNUFeQ+9nFiwTMMrNS6FQJiYgZmD2Umfy6U2fbQQICzJdVje9IjuhSJ0wbiAgH4PzYb09s+3siBrTTrWHaAhGJSVbjH5WcCGga3kjGEI1GEDReXqKmaaFareFZsQLbcRQcxWXWQ0e9BN4Cmcsu/qJyO2LRCEZHUhAw3ZaAWF0roFKtSWHEbZrJTH4iBF0QUScstm7LNAXE2OgwiHrnMDNjZXVdCUYn/bioM67Fe9ncTWJ82gtEeGDqwJivJzp1hWcWHq1Iw8SEnw9n9p8kUbatcnNJVjGHhxIYTiVlTmvbXy8Usb5R6qkjKrAeD07Q3HzuDAPXZSfs3zeKcCgoE2vbrzeayD1eleoQcJbmsrnrzDgjk54+OAHNJ0H9dB3HwfzDJZlpEOEHuj+fuwPgXZn0IEEA3BUgTwDslYEMMjQAngqQOoCQDGRQybp5bkMZZFDXtxVEKTRCYRAFbRPEDY1Ssnqh62eJb0mHu8rXtzWH+tP0Xll0r69qQZMl82723YKmWuJ3c1AvXbfEU3BCuel5xiLhEEIhA8GgAT0Q2OrEouNato1m00SjYaJWbyixbzU9lTFAtP3UUALJeBS6HlA6wLJsFMtVFDZKEJB+q20MEEJ+g5Fh6Ng39ibEdyfLNC08XnkC8e1c2wYjIdBtVBRNbmoyrewFP1DhnYXFPEQTfLV8RsWXXmkfnkf2DrmzaT+WmGXXnm64psSzwnd49g7znhOaRnjrwPhrt34/aOGN/x8tw3FYkPR+TrTCxPZEZsfTw319YC3n17nyvKb2wPJgStXquWg48q2m0c6ytMM1jsNWtV77MhGNXuvmtZ5/XCgU3onHE9/reuC93eSJZdl/l8ulz1Op1L9+dpRcXyo9/ywcNs4bhv6+9wRRAGPTtP6q180ricSen2TySiCekbVi8e2YYZwMGMZxAj4IaNoQkeZWOGbHth1ng4E/bdO8XTHNmyPJ5AMZgLf/At/j2PAbUsw0AAAAAElFTkSuQmCC\"\n    }), /*#__PURE__*/React.createElement(_Icon, {\n      style: {\n        color: 'rgba(0,0,0,.3)',\n        cursor: 'pointer'\n      },\n      type: \"caret-down\"\n    })))))), tags.show ? /*#__PURE__*/React.createElement(Tags, null) : null, /*#__PURE__*/React.createElement(BasicDrawer, Object.assign({\n      title: \"\\u7CFB\\u7EDF\\u8BBE\\u7F6E\",\n      closable: true,\n      onClose: this.onClose,\n      visible: this.state.visible,\n      onChangeTags: this.onChangeTags,\n      onChangeBreadCrumb: this.onChangeBreadCrumb,\n      onChangeTheme: this.onChangeTheme\n    }, this.props)));\n  }\n\n  // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {\n    // @ts-ignore\n    this[key] = eval(code);\n  }\n\n}\n\nconst mapStateToProps = state => state;\n\nconst mapDispatchToProps = dispatch => ({\n  setCollapse: data => {\n    dispatch(setCollapse(data));\n  },\n  setUserInfo: data => {\n    dispatch(setUserInfo(data));\n  },\n  emptyTag: () => {\n    dispatch(emptyTag());\n  },\n  addTag: data => {\n    dispatch(addTag(data));\n  },\n  setBreadCrumb: data => {\n    dispatch(setBreadCrumb(data));\n  },\n  setTags: data => {\n    dispatch(setTags(data));\n  },\n  setTheme: data => {\n    dispatch(setTheme(data));\n  }\n});\n\nconst _default = connect(mapStateToProps, mapDispatchToProps)(withRouter(TopHeader));\n\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(TopHeader, \"TopHeader\", \"/Users/johnlee/Desktop/react-antd-admin/src/views/layout/TopHeader.js\");\n  reactHotLoader.register(mapStateToProps, \"mapStateToProps\", \"/Users/johnlee/Desktop/react-antd-admin/src/views/layout/TopHeader.js\");\n  reactHotLoader.register(mapDispatchToProps, \"mapDispatchToProps\", \"/Users/johnlee/Desktop/react-antd-admin/src/views/layout/TopHeader.js\");\n  reactHotLoader.register(_default, \"default\", \"/Users/johnlee/Desktop/react-antd-admin/src/views/layout/TopHeader.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/Users/johnlee/Desktop/react-antd-admin/src/views/layout/TopHeader.js"],"names":["React","Component","connect","withRouter","setUserInfo","emptyTag","addTag","setCollapse","setBreadCrumb","setTags","setTheme","routes","FullScreen","Tags","BasicDrawer","TopHeader","state","visible","handleLogout","props","localStorage","removeItem","history","push","toNews","handClickTag","toggle","isCollapsed","collapse","setting","setState","onClose","onChangeTags","checked","show","setItem","JSON","stringify","onChangeBreadCrumb","onChangeTheme","type","componentDidMount","userInfo","getItem","parse","path","parent","i","length","obj","title","component","Object","assign","render","DropdownList","keys","role","name","tags","fontSize","cursor","document","getElementById","color","mapStateToProps","mapDispatchToProps","dispatch","data"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Icon, Avatar, Dropdown, Menu, Badge } from 'antd';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport { setUserInfo } from '@/redux/actions/userInfo';\nimport { emptyTag, addTag } from '@/redux/actions/tagList';\nimport { setCollapse, setBreadCrumb, setTags, setTheme } from '@/redux/actions/setting';\nimport { routes } from '@/router/routes';\nimport FullScreen from '@/components/FullScreen';\nimport Tags from './Tags';\nimport BasicDrawer from '@/components/BasicDrawer';\n\nclass TopHeader extends Component {\n\tstate = { visible: false };\n\thandleLogout = () => {\n\t\tthis.props.setUserInfo({});\n\t\tthis.props.emptyTag();\n\t\tlocalStorage.removeItem('isLogin');\n\t\tlocalStorage.removeItem('userInfo');\n\t\tthis.props.history.push('/');\n\t};\n\tcomponentDidMount() {\n\t\tlet userInfo = localStorage.getItem('userInfo') && JSON.parse(localStorage.getItem('userInfo'));\n\t\tif (userInfo) {\n\t\t\tthis.props.setUserInfo(userInfo);\n\t\t} else {\n\t\t\tthis.props.setUserInfo({});\n\t\t\tthis.props.history.push('/login');\n\t\t}\n\t}\n\ttoNews = () => {\n\t\tthis.handClickTag('/news');\n\t\tthis.props.history.push('/news');\n\t};\n\thandClickTag(path, parent) {\n\t\tfor (let i = 0; i < routes.length; i++) {\n\t\t\tif (path === routes[i].path) {\n\t\t\t\tlet obj = { path, title: '消息', component: routes[i].component };\n\t\t\t\tthis.props.addTag(parent ? Object.assign({}, obj, { parent: parent.title }) : obj);\n\t\t\t}\n\t\t}\n\t}\n\ttoggle = () => {\n\t\tthis.props.setCollapse({ isCollapsed: !this.props.collapse.isCollapsed });\n\t};\n\tsetting = () => {\n\t\tthis.setState({ visible: true });\n\t};\n\tonClose = () => {\n\t\tthis.setState({ visible: false });\n\t};\n\tonChangeTags = checked => {\n\t\tthis.props.setTags({ show: checked });\n\t\tlocalStorage.setItem('tags', JSON.stringify({ show: checked }));\n\t\tthis.onClose();\n\t};\n\tonChangeBreadCrumb = checked => {\n\t\tthis.props.setBreadCrumb({ show: checked });\n\t\tlocalStorage.setItem('breadCrumb', JSON.stringify({ show: checked }));\n\t\tthis.onClose();\n\t};\n\tonChangeTheme = checked => {\n\t\tthis.props.setTheme({ type: checked ? 'dark' : 'light' });\n\t\tlocalStorage.setItem('theme', JSON.stringify({ type: checked ? 'dark' : 'light' }));\n\t\tthis.onClose();\n\t};\n\trender() {\n\t\tconst DropdownList = (\n\t\t\t<Menu className=\"drop-list\">\n\t\t\t\t<Menu.Item key=\"user\">\n\t\t\t\t\t<Icon type=\"user\" />\n\t\t\t\t\t{Object.keys(this.props.userInfo).length > 0 && this.props.userInfo.role.name}\n\t\t\t\t</Menu.Item>\n\t\t\t\t<Menu.Item key=\"logout\" onClick={this.handleLogout}>\n\t\t\t\t\t<Icon type=\"logout\" />\n\t\t\t\t\t退出登录\n\t\t\t\t</Menu.Item>\n\t\t\t</Menu>\n\t\t);\n\t\tconst { tags } = this.props;\n\t\treturn (\n\t\t\t<div className=\"top-header\">\n\t\t\t\t<div className=\"top-header-inner\">\n\t\t\t\t\t<Icon className=\"trigger\" type={true ? 'menu-unfold' : 'menu-fold'} onClick={this.toggle} />\n\t\t\t\t\t<div className=\"header-title\">React-antd-admin 通用后台管理系统</div>\n\t\t\t\t\t<div className=\"header-right\">\n\t\t\t\t\t\t<div className=\"full-screen\">\n\t\t\t\t\t\t\t<FullScreen />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"setting\">\n\t\t\t\t\t\t\t<Icon style={{ fontSize: '21px', cursor: 'pointer' }} type=\"setting\" onClick={this.setting} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"news-wrap\">\n\t\t\t\t\t\t\t<Badge count={3}>\n\t\t\t\t\t\t\t\t<Icon style={{ fontSize: '21px', cursor: 'pointer' }} type=\"bell\" onClick={this.toNews} />\n\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"dropdown-wrap\" id=\"dropdown-wrap\" style={{ cursor: 'pointer' }}>\n\t\t\t\t\t\t\t<Dropdown getPopupContainer={() => document.getElementById('dropdown-wrap')} overlay={DropdownList}>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Avatar size=\"large\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAiCAYAAAA6RwvCAAADwElEQVRYR7WXTWwTVxDH/7Pe9Qf+ahyaOAmBUKeBAyqXSlUrUM/0A6lHxAWE1PbSG+IIoceKG5e2EqKXimMlWtpzRdWqgkurHiDEJTgkcQJx8Bf+2I9Bb8kG2/H6PRL7XfbwZub9dmbezDzCa6z5fH7EqTQ/AuFDZhwBMAUgvmmiDGCBCP+B8bsWC/46nU6vqZonFcFsdvmYCesCHJwggq6iwwwLGn4zoH+TyYz/IdPpCXJvIX9Qs82rzPyxzFCvfSK65QSMrw5PpR/6yfmCzGWXTjFb3wHkuX43LAC4TKR/MZOZuNHNUFeQ+9nFiwTMMrNS6FQJiYgZmD2Umfy6U2fbQQICzJdVje9IjuhSJ0wbiAgH4PzYb09s+3siBrTTrWHaAhGJSVbjH5WcCGga3kjGEI1GEDReXqKmaaFareFZsQLbcRQcxWXWQ0e9BN4Cmcsu/qJyO2LRCEZHUhAw3ZaAWF0roFKtSWHEbZrJTH4iBF0QUScstm7LNAXE2OgwiHrnMDNjZXVdCUYn/bioM67Fe9ncTWJ82gtEeGDqwJivJzp1hWcWHq1Iw8SEnw9n9p8kUbatcnNJVjGHhxIYTiVlTmvbXy8Usb5R6qkjKrAeD07Q3HzuDAPXZSfs3zeKcCgoE2vbrzeayD1eleoQcJbmsrnrzDgjk54+OAHNJ0H9dB3HwfzDJZlpEOEHuj+fuwPgXZn0IEEA3BUgTwDslYEMMjQAngqQOoCQDGRQybp5bkMZZFDXtxVEKTRCYRAFbRPEDY1Ssnqh62eJb0mHu8rXtzWH+tP0Xll0r69qQZMl82723YKmWuJ3c1AvXbfEU3BCuel5xiLhEEIhA8GgAT0Q2OrEouNato1m00SjYaJWbyixbzU9lTFAtP3UUALJeBS6HlA6wLJsFMtVFDZKEJB+q20MEEJ+g5Fh6Ng39ibEdyfLNC08XnkC8e1c2wYjIdBtVBRNbmoyrewFP1DhnYXFPEQTfLV8RsWXXmkfnkf2DrmzaT+WmGXXnm64psSzwnd49g7znhOaRnjrwPhrt34/aOGN/x8tw3FYkPR+TrTCxPZEZsfTw319YC3n17nyvKb2wPJgStXquWg48q2m0c6ytMM1jsNWtV77MhGNXuvmtZ5/XCgU3onHE9/reuC93eSJZdl/l8ulz1Op1L9+dpRcXyo9/ywcNs4bhv6+9wRRAGPTtP6q180ricSen2TySiCekbVi8e2YYZwMGMZxAj4IaNoQkeZWOGbHth1ng4E/bdO8XTHNmyPJ5AMZgLf/At/j2PAbUsw0AAAAAElFTkSuQmCC\" />\n\t\t\t\t\t\t\t\t\t<Icon style={{ color: 'rgba(0,0,0,.3)', cursor: 'pointer' }} type=\"caret-down\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Dropdown>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{tags.show ? <Tags /> : null}\n\t\t\t\t<BasicDrawer title=\"系统设置\" closable onClose={this.onClose} visible={this.state.visible} onChangeTags={this.onChangeTags} onChangeBreadCrumb={this.onChangeBreadCrumb} onChangeTheme={this.onChangeTheme} {...this.props} />\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nconst mapStateToProps = state => state;\nconst mapDispatchToProps = dispatch => ({\n\tsetCollapse: data => {\n\t\tdispatch(setCollapse(data));\n\t},\n\tsetUserInfo: data => {\n\t\tdispatch(setUserInfo(data));\n\t},\n\temptyTag: () => {\n\t\tdispatch(emptyTag());\n\t},\n\taddTag: data => {\n\t\tdispatch(addTag(data));\n\t},\n\tsetBreadCrumb: data => {\n\t\tdispatch(setBreadCrumb(data));\n\t},\n\tsetTags: data => {\n\t\tdispatch(setTags(data));\n\t},\n\tsetTheme: data => {\n\t\tdispatch(setTheme(data));\n\t}\n});\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(withRouter(TopHeader));\n"]},"metadata":{},"sourceType":"module"}